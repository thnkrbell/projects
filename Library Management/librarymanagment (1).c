#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<Windows.h>
#include <conio.h>
struct library{
char book[20];
int id;
char publisher[20];
char type[20];
};
typedef struct library librr;
int main(){
        SYSTEMTIME stime;
    GetSystemTime(&stime);
    int n,i,a[1000],b,k,d,e,f,r,c=0,d1,m1,y1,f1,r1,c1=0,d2,m2,y2,dd1,mm1,yy1,pp,pp1,pp2,i1,c2=0,jj1,aa5,array[1000],pp3,array1[1000],z,array2[1000],z1,ii1,cc1=0,cc2=0,h,books,eee,b1,ddd;
    char ch[20];



    printf("___________________________________________________________________________________________________________________\n");
printf("*******************************************************************************************************************\n");
printf("*******************************************************************************************************************\n");
printf("*******************************************************************************************************************\n");
printf("*******************************************************************************************************************\n");
printf("*******************************************************************************************************************\n");
printf("---------------------------------------------------------------------------------------------------------------------\n");
printf("|                                                                                                                   |\n");
printf("|                                                                                                                   |\n");
printf("|                                                                                                                   |\n");
printf("|                                                                                                                   |\n");
printf("|                                                                                                                   |\n");
printf("____________________________________________________________________________________________________________________\n");
printf("                                                                                                                    | \n");
printf("|                                                                                                                   |\n");
printf("|                                                                                                                   |\n");
printf("|                                                                                                                   |\n");
printf("|                                     LIBRARY MANAGMENT SYSTEM                                                      |\n");
printf("|                                                                                                                   |\n");
printf("|                                                                                                                   |\n");
printf("|                                                                                                                   |\n");
printf(" ___________________________________________________________________________________________________________________ \n");
printf("CREDITS:  KAUSTAV NAG (TEACH-LEAD)                                                                                  |\n");
printf("          PRIYASMITA LODH                                                                                           |\n");
printf("          RAJIB DATTA ROY                                                                                           |\n");
printf("____________________________________________________________________________________________________________________\n");
printf("********************************************************************************************************************\n");
printf("********************************************************************************************************************\n");
printf("********************************************************************************************************************\n");
printf("********************************************************************************************************************\n");
printf("--------------------------------------------------------------------------------------------------------------------\n");
printf("                                       PRESS  TAB TO CONTINUE\n");
 if(getche()=='\t')
 {
     system("cls");
 }

    printf("   ::::::::::::::::              ENTER THE NUMBER OF BOOKS YOU WANT TO ENTER (LIBRARY PURPOSE ONLY)     :::::::::::::::::::\n");
    scanf("%d",&n);
    librr *lib;
    lib=malloc(n*(sizeof(librr)));
    for(i=0;i<n;i++){
        printf("BOOK NAME::::: \n");
        scanf("%s",lib[i].book);
        printf("TYPE OF BOOK:::: \n");
        scanf("%s",lib[i].type);
        printf("BOOK ID:::::: \n");
        scanf("%d",&lib[i].id);
        printf("BOOK PUBLISHER:::::: \n");
        scanf("%s",lib[i].publisher);
    }
    printf(" :::::::::::::::::::                         ENTER TAB TO CONTINUE                  ::::::::::::::::::::\n");
    if(getche()=='\t')
    {
        system("cls");
    }

       for(i=0;i<n;i++){
            a[i]=lib[i].id;
}for(i1=0;i1<1;i1++){
    printf("::::::::::::::::::                          ENTER THE NAME OF APPLICANT            ::::::::::::::::::: \n ");
    scanf("%s",ch);
    c2++;
    system("cls");
    printf("************************************WELCOME %s !PLEASE CHOOSE YOUR DESIRED OPTION.",ch);
    printf("********************************************************************************************************************\n");
    printf("*********************                      1.PRESS 1 TO SEE BOOKLIST.                     **************************\n");
    printf("******************** *                     2.PRESS 2 TO ISSUE BOOK.                      * *************************  \n");
    printf("********************  *                    3.PRESS 3 TO SUBMIT BOOK.                    *  *************************  \n");
    printf("********************   *                   4.PRESS 4 FOR ACCOUNTING DETAILS.           *   *************************  \n");
    printf("********************    *************      5.PRESS 5 TO EXIT.               ***********    *************************  \n");
    printf("********************************************************************************************************************\n");
scanf("%d",&b);
system("cls");
do{

    switch(b){
case 1:
    for(k=0;k<n;k++){
        printf(" ::::::::::::::::::::::::::::::::::::::::BOOK NAME::::%s \n",lib[k].book);
        printf(" ::::::::::::::::::::::::::::::::::::::::TYPE OF BOOK:::%s \n",lib[k].type);
        printf(" ::::::::::::::::::::::::::::::::::::::::BOOK ID:::::::%d \n",lib[k].id);
        printf(" ::::::::::::::::::::::::::::::::::::::::BOOK PUBLISHER:::::::%s \n",lib[k].publisher);
    }
    printf("_---------------------------------ENTER 0 TO EXIT AND 1 TO BACK TO THE GIVEN MENU------------------------------------ \n");
    scanf("%d",&d);
   if(d==1)
        {
            system("cls");


    printf("********************************************************************************************************************\n");
    printf("*********************                      1.PRESS 1 TO SEE BOOKLIST.                     **************************\n");
    printf("******************** *                     2.PRESS 2 TO ISSUE BOOK.                      * *************************  \n");
    printf("********************  *                    3.PRESS 3 TO SUBMIT BOOK.                    *  *************************  \n");
    printf("********************   *                   4.PRESS 4 TO ACCOUNTING DETAILS.            *   *************************  \n");
    printf("********************    *************      5.PRESS 5 TO EXIT.               ***********    *************************  \n");
    printf("********************************************************************************************************************\n");


    }

    scanf("%d",&e);
    b=e;
    break;
case 2:
    cc1++;
    system("cls");
    printf(" ____________________________________________________________________________________________________________________\n");
    printf(" | ---------- WELCOME !!!!  YOU CAME HERE TO ISSUE A BOOK. HOPE YOU REMEMBER THE BOOK ID DETAILS!!!!! -------------- |\n");
    printf(" |  --------------        ENTER THE BOOK ID YOU WANT TO ISSUE     ------------------------                           |\n");
    printf(" |___________________________________________________________________________________________________________________|\n");
    scanf("%d",&f);
    for(k=0;k<n;k++){
    if(a[k]==f){
        r=k;
        c++;
    }
    if(c==1){
        break;
    }
}printf("                                  THE BOOK DETAILS ARE: \n");
  printf("|----------------------------------BOOK NAME:::::::%s -------------\n",lib[r].book);
  printf("|-----------------------------------TYPE OF BOOK:::::%s -----------\n",lib[r].type);
  printf("|----------------------------------BOOK ID:::::::::%d-------------- \n",lib[r].id);
  printf("|----------------------------------BOOK PUBLISHER::::::::%s----------\n",lib[r].publisher);
  printf("|----------------------------------DATE OF ISSUING = %d/%d/%d -------\n",stime.wDay,stime.wMonth,stime.wYear);
  d1=stime.wDay+10;
  m1=stime.wMonth;
  y1=stime.wYear;
      if(m1==1||m1==3||m1==5||m1==7||m1==8||m1==10||m1==12){
            if(d1>31){
                    d1=d1-31;
                    m1=m1+1;
                    if(m1>12){
                        m1=m1-12;
                        y1=y1+1;
  printf("|----------------------------------DATE OF SUBMITTING = %d/%d/%d---- \n",d1,m1,y1);
            }
                else{
  printf("|---------------------------------DATE OF SUBMITING = %d/%d/%d------\n",d1,m1,y1);
                }
            }else{
  printf("|----------------------------------DATE OF SUBMITTING = %d/%d/%d---- \n",d1,m1,y1);
            }
    }
    if(m1==2){
            if(d1>28){
                m1=m1+1;
                d1=d1-28;
  printf("|--------------------------------DATE OF SUBMITTING = %d/%d/%d------ \n",d1,m1,y1);
            }
            else{
  printf("|------------------------------DATE OF SUBMITTING = %d/%d/%d-------- \n",d1,m1,y1);
            }
    }if(m1==4||m1==6||m1==9||m1==11){
        if(d1>30){
              m1=m1+1;
              d1=d1-30;
  printf("|---------------------DATE OF SUBMITTING = %d/%d/%d---------------- \n",d1,m1,y1);
            }
            else{
  printf("|-------------------DATE OF SUBMITTING = %d/%d/%d------------------ \n",d1,m1,y1);
            }
    }
  printf("------------------                           NOTE               --------------------------\n");
  printf("THE INITIAL PAYMENT FOR 10 DAYS IS RUPEES 15, FAIURE WILL CAUSE YOU AN INCREMENT OF RS.1 PER DAY WITH THE SUM \n");
  printf("--------------------------------------------------------------------------------------------\n");
  printf("ENTER 0 FOR EXIT AND 1 FOR BACK TO THE MENU \n");
    scanf("%d",&d);
    system("cls");
    if(d==1)
        {
    printf("********************************************************************************************************************\n");
    printf("*********************                      1.PRESS 1 TO SEE BOOKLIST.                     **************************\n");
    printf("******************** *                     2.PRESS 2 TO ISSUE BOOK.                      * *************************  \n");
    printf("********************  *                    3.PRESS 3 TO SUBMIT BOOK.                    *  *************************  \n");
    printf("********************   *                   4.PRESS 4 FOR ACCOUNTING DETAILS.           *   *************************  \n");
    printf("********************    *************      5.PRESS 5 TO EXIT.               ***********    *************************  \n");
    printf("********************************************************************************************************************\n");
        }
    scanf("%d",&e);
    b=e;
    break;
case 3:
    cc2++;
    system("cls");
     printf("  _________________________________________________________________________________________\n");
     printf(" |---------WELCOME!! YOU WANT TO RETURN A BOOK !HOPE YOU REMEMBER THE BOOK ID -------------| \n");
     printf(" |----------------------ENTER THE BOOK ID YOU WANT TO RETURN-------------------------------| \n");
     printf(" |_________________________________________________________________________________________|\n");
    scanf("%d",&f1);
    for(k=0;k<n;k++){
        if(a[k]==f1){
            r1=k;
            c1++;
        }if(c==1){
        break;
        }}
  printf("----------------------------THE BOOK YOU WANT TO SUBMIT-----------------------------\n");
  printf("   :::::::::::::::::BOOK NAME:::::::::::::::%s \n",lib[r].book);
  printf("   :::::::::::::::::TYPE OF BOOK::::::::::::%s \n",lib[r].type);
  printf("   :::::::::::::::::Book ID:::::::::::::::::%d \n",lib[r].id);
  printf("   :::::::::::::::::BOOK PUBLISHERS:::::::::%s \n",lib[r].publisher);
  printf("   :::::::::::::::::DATE OF ISSUING::::::::: %d/%d/%d \n",stime.wDay,stime.wMonth,stime.wYear);
  printf("   ::::::::::::::::: ENTER THE DATE OF SUBMIT:::::: \n");
  printf("   :::::::::::::::::FORMAT FOR ENTERING:::::::::::::::\n ");
  printf("  :::::::::::::::::DATE/MONTH/YEAR:::::::::::::::::::\n");
    scanf("%d",&d2);
    scanf("%d",&m2);
    scanf("%d",&y2);

    printf("%d/%d/%d \n",d2,m2,y2);
    yy1=stime.wYear-y2;
    pp=15+(365*yy1);
    mm1=stime.wMonth-m2;
    pp1=pp+(30*mm1);
    dd1=stime.wDay-d2;
    if((yy1==0)&&(mm1==0)&&(dd1<11))
    {
        pp2=15;
    }
    else{
    pp2=pp1+dd1-10;
    }
    printf("  ::::::::::::::::::::THE TOTAL AMOUNT IS = %d \n",pp2);
    printf("  ::::::::::::::::::::ENTER THE AMOUNT TO WANT TO PAY:::::::::\n");
    scanf("%d",&aa5);
    pp3=pp2-aa5;
    for(jj1=c2;jj1<=c2;jj1++){
        array[jj1]=aa5;
        array1[jj1]=pp3;
        array2[jj1]=pp2;
    }
    printf("--------------------ENTER 0 TO EXIT AND 1 TO GO BACK TO THE MENU ------------------ \n");
    scanf("%d",&d);
    if(d==1)
        {
            system("cls");
    printf("********************************************************************************************************************\n");
    printf("*********************                      1.PRESS 1 TO SEE BOOKLIST.                     **************************\n");
    printf("******************** *                     2.PRESS 2 TO ISSUE BOOK.                      * *************************  \n");
    printf("********************  *                    3.PRESS 3 TO SUBMIT BOOK                     *  *************************  \n");
    printf("********************   *                   4.PRESS 4 FOR ACCOUNTING DETAILS            *   *************************  \n");
    printf("********************    *************      5.PRESS 5 TO EXIT.               ***********    *************************  \n");
    printf("********************************************************************************************************************\n");
        }
    scanf("%d",&e);
    b=e;
    break;
case 4:
    system("cls");
    printf(":::::::::::::::::::::::::WELCOME TO REVIEW COUNTER ONLY LIBRARY EMPLYOEE'S ARE ALLOWED:::::::::::::::::::::::::::::: \n");
    printf("-----------------------------------------ENTER 1 FOR ACCOUNTING DETAILS AND 2 FOR BOOK STOCKS---------------------- \n");
    scanf("%d",&h);
    do{
    switch (h){
case 1:
        printf("         CUSTOMER =TOTAL AMOUNT::::AMOUNT PAID:::::::AMOUNT DUE::::::::: \n");
    for(ii1=1;ii1<=c2;ii1++){
        printf("Customer%d = %d        %d              %d      \n",ii1,pp2,aa5,pp3);
    }
     printf("------------------------ENTER 0 TO EXIT AND 1 TO GO BACK TO THE MENU-------------- \n");
    scanf("%d",&ddd);
    if(ddd==1)
        {
    printf("------------------------------------ENTER 1 FOR ACCOUNTING DETAILS AND 2 FOR BOOK STOCKS---------------------\n");
        }
    scanf("%d",&eee);
    b1=eee;
    break;
case 2:

    books=n-cc1+cc2;
    printf("|BOOK STOCKS ARE AVAILABLE|");
    printf("|TOTAL NUMBER OF BOOK AVAILABLE = %d \n",n);
    printf("|TOTAL NUMBER OF BOOKS TAKEN TODAY = %d \n",cc1);
    printf("|TOTAL NUMBER OF BOOKS RETURNED = %d \n",cc2);
     printf("---------------------------------ENTER 1 FOR GOING BACK TO MENU AND 0 FOR EXITING------------------------\n");
    scanf("%d",&ddd);
    if(ddd==1)
        {
            system("cls");
    printf("********************************************************************************************************************\n");
    printf("*********************                      1.PRESS 1 TO SEE BOOKLIST.                     **************************\n");
    printf("******************** *                     2.PRESS 2 TO ISSUE BOOK.                      * *************************  \n");
    printf("********************  *                    3.PRESS 3 TO SUBMIT BOOK                     *  *************************  \n");
    printf("********************   *                   4.PRESS 4 FOR ACCOUNTING DETAILS            *   *************************  \n");
    printf("********************    *************      5.PRESS 5 TO EXIT.               ***********    *************************  \n");
    printf("********************************************************************************************************************\n");
        }
    scanf("%d",&eee);
    b1=eee;
    break;
    }
    }while(ddd==1);
     printf("-------------------------------ENTER 0 TO EXIT AND 1 TO GO BACK TO MENU-------------------------- \n");
    scanf("%d",&d);
    if(d==1)
        {
    printf("Enter 1.t \n");
        }
    scanf("%d",&e);
    b=e;
    break;
    }
    }
    while(d==1);
    system("cls");
    printf("*****************************************************************************************************************\n");
    printf("******************************************************************************************************************\n");
    printf("*****************************************************************************************************************\n");
    printf("------------------------PRESS 1 FOR ENTERING THE MENU BACK AGAIN AND 0 FOR EXITING THE SOFTWARE----------------- \n");
    printf("*****************************************************************************************************************\n");
    printf("******************************************************************************************************************\n");
    printf("******************************************************************************************************************\n");

    scanf("%d",&z);
    if(z==1){
        i1--;
        continue;
    }
    else
    {
    system("cls");
    printf("*****************************************************************************************************************\n");
    printf("******************************************************************************************************************\n");
    printf("*****************************************************************************************************************\n");
    printf("------------------------------THANK YOU FOR VISITING OUR LIBRARY-------------------------------------------------- \n");
    printf("*****************************************************************************************************************\n");
    printf("******************************************************************************************************************\n");
    printf("******************************************************************************************************************\n");

    }
}
    return 0;
}








